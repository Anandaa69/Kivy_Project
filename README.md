# Watch Out! Engineer
 เป็นเกมแนว **shooting** มุมมอง **bird eyes view** ที่ผู้เล่นต้องต่อสู้กับซอมบี้ โดยผู้เล่นต้องบริหารทรัพยากรอย่าง พลังชีวิต ยา กระสุน ให้ดี โดยจุดประสงค์ของเกมต้องจัดการซอมบี้ในแต่ละ WAVE ไปเรื่อยๆจนกว่าเราจะไม่ไหว โดยในแต่ละ WAVE นั้นซอมบี้ความเก่งจะเพิ่มขึ้น
## การรันและภาพรวมของโปรแกรม
    เมื่อเข้าสู่โปรแกรมจะอยู่ที่หน้าหลักของเกม โดยในหน้าหลักจะสามารถปรับตั้งค่าเสียงได้ โดยมีให้ปรับ 2 แบบคือ Music และ SFX โดยเสียง SFX จะสามารถกดเพื่อทดสอบเสียงเอฟเฟคได้ และจะมีอยู่ 2 ปุ่มกดคือ Play และ Exit เมื่อเรากดเล่น (Play) จะทำการเข้าสู่หน้าเกม โดยผู้เล่นสามารถใช้ปุ่ม **W, A, S, D** ในการเดิน **J, K** เพื่อนหมุนซ้ายขวา กด **H** เพื่อรักษา (ต้องมีไอเทม Heal) กด **Space bar** เพื่อยิงปืน และสามารถกด **1, 2** เพื่อสลับปืนได้ โดยปืนในเกมจะมี 2 ประเภทคือ Shotgun ปืนนี้จะมีกระสุนที่จำกัด และปืน Pistol ปืนนี้จะมีกระสุนไม่จำกัดแต่ความเสียหายต่อซอมบี้นั้นน้อยมากๆ ต้องยิงซอบบี้โดน 10 นัดจึงจะจัดการได้ โดยในตอนเริ่มเกมนั้นจะยังไม่มีซอมบี้บุกมา ซึ่งช่วงนี้ก็คือช่วงพักระหว่าง WAVE โดยในตอนเริ่มเกมนั้นคือ WAVE0 โดยในช่วงพักผู้เล่นสามารถซื้อของได้ โดยพ่อค้าจะปรากฎตัวออกมาให้เห็น เมื่อเราเดินเข้าไปชนกับพ่อค้าจะปรากฎปุ่มขึ้นมาโดยให้ใช้ เมาส์กด แล้วจะมีหน้าต่างขึ้นมา ให้เราสามารถอัพพลังชีวิตและความเร็วของผู้เล่นได้ในราคา 20 บาท โดยเงินจะได้จากการจัดการซอมบี้ และสามารถซื้อกระสุนกับยา ได้ในราคา 10 บาท โดยการที่เราจะเริ่ม WAVE นั้นต้องเดินไปชนกับ โน๊ตบุ๊คสีแดงตรงกลางแมพ ซึ่งจะปรากฎปุ่มขึ้นมาให้กดเริ่ม WAVE จากนั้นซอมบี้ก็จะแห่กันอออกมาจากรอบแมพมาหาผู้เล่น โดยซอมบี้เมื่อจัดการได้จะมีโอกาส **50%** ที่จะดรอป item เป็น กระสุนปืน และ ยา เมื่อจัดการกับซอมบี้จนหมดเวฟแล้วจะเข้าสู้ช่วงพัก และเตรียมเข้าสู่ WAVE ต่อไปที่ซอมบี้จะเก่งมากขึ้น!
## การทำงานของ Code
 ในไฟล์ main.py ในส่วนของคลาส app หลักนั้น ชื่อว่า **MyGameApp(App)** ที่ด้านในการใช้ **ScreenManager()** ในการจัดการหน้าจอในแอปโดยจะมีการเพิ่มหน้าจอเข้าไปดังนี้
 - หน้าจอ **main_menu** ที่จะใช้คลาส MainMenu()
 - หน้าจอ **game** ที่จะใช้คลาส GameScreen()
 - หน้าจอ **end_game** ที่จะใช้คลาส EndGame()

 โดยจะสามารถควบคุมการเปลี่ยนหน้าผ่านการใช้ app.root.current = '(Screen name)' ในไฟล์ .kv ได้
### โดย class ทั้งหมดใน code นี้ประกอบด้วย
 1. MainMenu(Screen)
 2. EndGame(Screen)
 3. GameScreen(Screen)
 4. UpgradePopup(Popup)
 5. WaveLabel(Widget)
 6. Obstacle(Image)
 7. Bullet(Widget)
 8. Enemy(Widget)
 9. Player(Widget)
 10. Heal_item(Widget)
 11. Ammo_item(Widget)
 12. MyGameApp(App) --> ได้อธิบายไปแล้ว

#### MainMenu(Screen)
 เป็นคลาสที่จัดการหน้าจอในส่วนของหน้าแรกของเกม โดยเมื่อเริ่มหน้าจอนี้นั้น **init** จะมีการใช้ Clock เพื่อผูกให้ตรวจสอบจำนวน 60 ครั้งใน 1 วินาทีกับเมธอด update ที่เป็นเมธอดสำหรับการตรวจเช็คค่าต่างๆตลอดเวลา (โดยจะใช้หลักการนี้ในหลายๆคลาสหลังจากนี้) และภายในคลาสนี้ประกอบด้วยเมธอดดังนี้
 - **on_enter()**  
    เป็นเมธอดที่มีมาอยู่แล้วกับคลาสแม่อย่าง Screen ที่จะทำคำสั่งดังนี้เมื่อเข้าสู่หน้าจอ โดยภายในเมธอดนี้จะทำการโหลด Music ด้วย **SoundLoader** เพื่อทำการเปิดเพลงเมื่อเข้าเกม
- **update()**
    ภายในเมธอดนี้นั้นจะถูกตรวจเช็คตลอดเวลาเพราะมีการใช้ Clock โดยภายในนี้จะเช็คว่าเพลงเล่นอยู่มั้ยหากเล่นอยู่ให้ผูก volume ของเพลงกับ Slider ที่เป็นตัวปรับค่าแบบเส้นที่อยู่ในไฟล์ .kv เพื่อให้สามารถปรับระดับเสียงผ่าน Slider ได้
- **sound_test()**
    เป็นเมธอดที่ผูกกับปุ่มใน .kv เมื่อทำการกดปุ่มจะเรียกใช้ฟังก์ชันนี้ฟังก์ชันนี้จะทำการเปิดเสียง SFX เพื่อให้สามารถเทสความดังของเอฟเฟคได้เมื่อปรับ Slider ในส่วน SFX
- **on_leave()**
    เป็นเมธอดที่มีมาอยู่แล้วกับคลาสแม่อย่าง Screen ที่จะทำคำสั่งดังนี้เมื่อเข้าออกจากหน้าจอ โดยภายในนี้จะทำการสั่งปิด Music ที่เล่นในหน้าหลักกันเพลงซ้อน และทำการใช้ manager.get_screen('game') เพื่อเรียกใช้เมธอดของอีกคลาสหนึ่งเพื่อส่งค่าความดังของ Music และ SFX ที่ได้ปรับใน Slider ไปยังคลาส GameScreen(Screen)